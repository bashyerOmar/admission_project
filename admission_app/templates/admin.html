{%extends 'base.html'%}

{%block content%}

    <a href="/logout">logout</a>
    <a href="/add_course">Add Course</a>
    <h4>Welcome to admin page {{user.first_name}}</h4>

    <table class="table">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Course Name</th>
            <th scope="col">Description</th>
            <th scope="col">Students Number: </th>
            <th scope="col">Actions: </th>
          </tr>
        </thead>
        <tbody>
            {% for course in courses %}
          <tr>
            <th scope="row">{{course.id}}</th>
            <td>{{course.name}}</td>
            <td>{{course.desc}}</td>
            {% load filters %}
            <td>{{ course.users.all|in_category:'approve'|length }} </td>
            <td>
              <a class="btn btn-primary btn-light" href="/edit_course/{{course.id}}">Edit</a> |
            <a class="btn btn-primary btn-light" href="/delete_course/{{course.id}}">Delete</a></td>
          </tr>
          {%endfor%}
        </tbody>
      </table>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Student Name</th>
            <th scope="col">Course Name</th>
            <th scope="col">State</th>
            <th scope="col">Actions: </th>
          </tr>
        </thead>
        <tbody>
            {% for student in students%}
          <tr>
            <th scope="row">{{student.id}}</th>
            <td>{{student.first_name}} {{student.last_name}}</td>
            <td>{{student.course.name}}</td>
            <td>{{student.state }}</td>
            <td><a class="btn btn-primary btn-light" href="/edit_state/{{student.id}}/approve">Approve</a> |
            <a class="btn btn-primary btn-light" href="/edit_state/{{student.id}}/decline">Decline</a></td>
          </tr>
          {%endfor%}
        </tbody>
      </table>
    <!-- <img src="{{course.photo.url}}" alt="My image"> -->
{%endblock%}
